"use strict";angular.module("mission11App",["google-maps","infinite-scroll"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/pois/:poiId",{templateUrl:"views/poi_detail.html",controller:"PoiDetailCtrl"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]),angular.module("mission11App").controller("MainCtrl",["$scope","$http",function(a,b){window.navigator.geolocation.getCurrentPosition(function(c){var d="https://apis.skplanetx.com/tmap/pois/search/around";a.page=0,a.perPage=10,a.totalCount=10,a.pages=1,a.pois=[],a.fetchPois=function(){if(!(a.page>=a.pages)){a.page++;var e=$.param({version:1,page:a.page,count:a.perPage,bizAppId:"",categories:"한식;중식;일식;양식",centerLon:c.coords.longitude,centerLat:c.coords.latitude,radius:3,reqCoordType:"WGS84GEO",resCoordType:"WGS84GEO",callback:""});b({method:"get",url:[d,e].join("?"),headers:{appKey:"358b11d1-64e8-362d-973b-7c5cbbc0f74c"}}).success(function(b){a.pages=Math.round(b.searchPoiInfo.totalCount/a.perPage),angular.forEach(b.searchPoiInfo.pois.poi,function(b){a.pois.push(b)})})}},a.fetchPois()})}]),angular.module("mission11App").controller("PoiDetailCtrl",["$scope","$routeParams","$http",function(a,b,c){google.maps.visualRefresh=!0,angular.extend(a,{position:{coords:{latitude:44,longitude:-73}},centerProperty:{latitude:44,longitude:-73},zoomProperty:4,markersProperty:[{latitude:44,longitude:-73}],clickedLatitudeProperty:null,clickedLongitudeProperty:null,eventsProperty:{click:function(a,b,c){$log.log("user defined event on map directive with scope",this),$log.log("user defined event: "+b,a,c)}}}),a.poiId=b.poiId,a.poiFetched=!1;var d,e;d="https://apis.skplanetx.com/tmap/pois/"+b.poiId,e=$.param({version:1,bizAppId:"",resCoordType:"WGS84GEO",callback:""}),c({method:"get",url:[d,e].join("?"),headers:{appKey:"358b11d1-64e8-362d-973b-7c5cbbc0f74c"}}).success(function(b){a.poi=b.poiDetailInfo,angular.extend(a,{position:{coords:{latitude:a.poi.lat,longitude:a.poi.lon}},centerProperty:{latitude:a.poi.lat,longitude:a.poi.lon},zoomProperty:16,markersProperty:[{latitude:a.poi.lat,longitude:a.poi.lon}],clickedLatitudeProperty:null,clickedLongitudeProperty:null,eventsProperty:{click:function(a,b,c){$log.log("user defined event on map directive with scope",this),$log.log("user defined event: "+b,a,c)}}}),prettyPrint()})}]);